<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Priceop</title>
    <link rel="stylesheet" href="/fonts/font.css" />
    <link href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link href="/css/style.css" rel="stylesheet" />
	
	
  </head>
  <body>
  <header class="header-sec">
	  <div class="container">
		  <nav class="navbar navbar-expand-lg navbar-light">
			  <div class="d-flex w-100 justify-content-between">
				  <a class="navbar-brand" href="/">
					  <img src="/images/logo.svg" alt="Logo" />
				  </a>
				  <div class="d-flex d-lg-none">
					  <ul class="navbar-nav flex-row">
						  <li class="nav-item">
							  <a class="nav-link" aria-current="page" href="/show-products">
								  <i class="fa-regular fa-heart"></i>
							  </a>
						  </li>
						  <li class="nav-item">
							  <a class="nav-link" aria-current="page" href="/">
								  <i class="fa-solid fa-cart-shopping"></i>
							  </a>
						  </li>
						  <li class="nav-item login-btn me-2">
							  <a class="nav-link" aria-current="page" href="/">
								  <i class="fa-solid fa-arrow-right-to-bracket"></i> Log In
							  </a>
						  </li>
					  </ul>
					  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
						  <span class="navbar-toggler-icon"></span>
					  </button>
				  </div>
				  <div class="collapse navbar-collapse" id="navbarSupportedContent">
					  <ul class="navbar-nav m-auto mb-2 mb-lg-0">
						  <li class="nav-item">
							  <a class="nav-link " aria-current="page" href="/">Home</a>
						  </li>
						  <li class="nav-item">
							  <a class="nav-link" aria-current="page" th:href="@{/categories}">Categories</a>
						  </li>
						  <li class="nav-item">
							  <a class="nav-link" aria-current="page" href="/live_products">Live Products</a>
						  </li>
						  <li class="nav-item">
							  <a class="nav-link" aria-current="page" href="/main_products">Main Products</a>
						  </li>
						  <li class="nav-item">
							  <a class="nav-link" aria-current="page" href="/about-us">About us</a>
						  </li>
						  <li class="nav-item">
							  <a class="nav-link" aria-current="page" href="/merchant_section">Merchant Section</a>
						  </li>
					  </ul>
					  <ul class="navbar-nav me-0 mb-2 mb-lg-0 ms-auto d-none d-lg-flex">

						  <li class="nav-item login-btn">
							  <a class="nav-link" aria-current="page" href="/loginSignup">
								  <i class="fa-solid fa-arrow-right-to-bracket"></i> Log In
							  </a>
						  </li>
					  </ul>
				  </div>
			  </div>
		  </nav>
	  </div>
  </header>

  <div class="banner-sec">
	  <div class="container">
		  <div class="bannerTxt">
			  <h1>Compare, Find Products with Priceop</h1>
			  <form class="bnr-srch" action="/search" method="get">
				  <input type="search" placeholder="Search by Product Name" name="query" th:value="${query}"/>
				  <button type="submit">
					  <i class="fa-solid fa-magnifying-glass"></i>
				  </button>
			  </form>
		  </div>
	  </div>
  </div>



		<section class="top_prods pt-5">
			<div class="container">
				<nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34" aria-label="breadcrumb">
<!--					<ol class="breadcrumb">-->
<!--						<li class="breadcrumb-item" aria-current="page" th:text="${product.category}"><a href="#">Home</a></li>-->
<!--						<li class="breadcrumb-item">Product</li>-->
<!--						<li class="breadcrumb-item active" aria-current="page" th:text="${product.productName}"></li>-->
<!--					</ol>-->

					<ol class="breadcrumb">
						<!-- Home link -->
						<li class="breadcrumb-item">
							<a href="/">Home</a>
						</li>

						<!-- Loop through the category path -->
						<li class="breadcrumb-item" th:each="category : ${categoryPath}">
							<a th:href="@{/category/{id}(id=${category.id})}" th:text="${category.name}"></a>
						</li>

						<!-- Active Product Name -->
<!--						<li class="breadcrumb-item active" aria-current="page" th:text="${product.productName}"></li>-->
					</ol>



				</nav>
				<div class="product_detail">
					<div class="row">
						<div class="col-md-6">
							<div class="slider slider-for">
								<!-- Product images slider -->
								<div th:each="image : ${product.productImages}" >
									<div>
										<div>
											<img th:src="@{${image}}" alt="" />
										</div>
									</div>
								</div>
							</div>
							<div class="slider slider-nav">
							<!-- Thumbnail images slider -->
							<div th:each="image : ${product.productImages}">
								<div>
									<img th:src="@{${image}}" alt="" />
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="product-content">
							<h2 class="product-title" th:text="${product.productName}">Product Name</h2>
							<a th:href="@{${product.staticUrl}}" class="product-link">Visit Store</a>
							<div class="product-rating">
<!--								&lt;!&ndash; Full stars &ndash;&gt;-->
<!--								<span th:each="i : ${#numbers.sequence(1, T(java.lang.Math).floor(T(java.lang.Double).parseDouble(product.averageRating)).intValue())}">-->
<!--									<i class="fas fa-star"></i>-->
<!--								</span>-->

<!--								&lt;!&ndash; Half star (if rating has a decimal part) &ndash;&gt;-->
<!--								<span th:if="${T(java.lang.Double).parseDouble(product.averageRating) % 1.0 >= 0.5}">-->
<!--									<i class="fas fa-star-half-alt"></i>-->
<!--								</span>-->

<!--								&lt;!&ndash; Empty stars &ndash;&gt;-->
<!--								<span th:each="i : ${#numbers.sequence(T(java.lang.Math).ceil(T(java.lang.Double).parseDouble(product.averageRating)).intValue() + 1, 5)}">-->
<!--									<i class="far fa-star"></i>-->
<!--								</span>-->

<!--								<span th:text="'(' + ${product.reviews} + ' reviews)'"></span>-->

								<span th:if="${product.averageRating != null}">
    							<!-- Full stars -->
    								<span th:each="i : ${#numbers.sequence(1, T(java.lang.Math).floor(T(java.lang.Double).parseDouble(product.averageRating)).intValue())}">
										<i class="fas fa-star"></i>
									</span>

																	<!-- Half star (if rating has a decimal part) -->
									<span th:if="${T(java.lang.Double).parseDouble(product.averageRating) % 1.0 >= 0.5}">
										<i class="fas fa-star-half-alt"></i>
									</span>

																	<!-- Empty stars -->
									<span th:each="i : ${#numbers.sequence(T(java.lang.Math).ceil(T(java.lang.Double).parseDouble(product.averageRating)).intValue() + 1, 5)}">
										<i class="far fa-star"></i>
									</span>
								</span>
								<span th:if="${product.averageRating == null}">No rating available</span>
							</div>


							<div class="product-price">
<!--								<p class="last-price">Old Price: <span th:text="${product.productPrice}"></span></p>-->
								<p class="new-price">New Price: <span th:text="${product.productPrice}"></span> </p>
							</div>
							<div class="product-detail">
								<h2 class="mb-0">Product Description</h2>
								<p th:text="${product.productDescription}">Description</p>
								<ul>
									<li>Available: <span>in stock</span></li>
									<li>Category: <span th:text="${product.category}">Category</span></li>
									<li>Shipping Area: <span>All over the world</span></li>
									<li>Shipping Fee: <span>Free</span></li>
								</ul>
							</div>
						</div>
					</div>
				</div>

				<div class="retailer_sec mt-5">
					<h2 class="site-heading d-sm-flex align-items-center justify-content-between w-100">Price History</h2>
					<div id="line" class="my-3 bg-white" style="height:300px; border:1px solid #eee;"></div>

					<h2 class="site-heading d-sm-flex align-items-center justify-content-between w-100">
						<span class="fw-normal">
							Lowest price on record (<span th:text="${(lowestPriceEverDate)}"></span>):
							<b>£<span th:text="${lowestPriceEver}"></span></b> |
							Lowest price today:
							<b>£<span th:text="${lowestPriceToday}"></span></b>
						</span>
					</h2>
				</div>
			</div>
		</div>
	</section>


	<section class="news_sec text-center">
		<div class="container">
			
			<h3 class="site-heading mb-2">Subscibe for Newsletter</h3> 
			<p>Keep up our latest news and offers. Subscibe our newsletter.</p>
			<form class="bnr-srch">
            <input type="search" placeholder="Search by Product Name">
            <button type="submit"class="text-uppercase">
              Subscribe <i class="fa-solid fa-arrow-right ms-2"></i>
            </button>
          </form>
		
		</div>
	</section>
    <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="link_bx col-md-3 col-6">
            <h3 class="site-heading">Need Help ?</h3>
            <ul>
              <li><a href="#">About Priceop</a></li>
              <li><a href="#">Getting Started</a></li>
              <li><a href="#">Jobs</a></li>
              <li><a href="#">Contact</a></li>
              <li><a href="#">How to Use</a></li>
              <li><a href="#">FAQ</a></li>
            </ul>
          </div>
          <div class="link_bx col-md-3 col-6">
            <h3 class="site-heading">Top Stores</h3>
            <ul>
				<li><a href="#">Ted Baker UK</a></li>
              <li><a href="#">Raw Denim</a></li>
              <li><a href="#">Damart</a></li>
              <li><a href="#">Long Tall Sally</a></li>
              <li><a href="#">Fragrance Direct</a></li>
            </ul>
          </div>
          <div class="link_bx col-md-3 col-6">
            <h3 class="site-heading">Business</h3>
            <ul>
				<li><a href="#">Flight Comparison</a></li>
				  <li><a href="#">Product Comparison</a></li>
				  <li><a href="#">Partners</a></li>
				  <li><a href="#">Register a Shop</a></li>
				  <li><a href="#">Affiliate Partner Programme</a></li>
             
            </ul>
          </div>
          <div class="link_bx col-md-3 col-6">
            <h3 class="site-heading">Follow us</h3>
            <ul>
              <li><a href="#"><i class="fa-brands fa-facebook-f"></i> Facebook</a></li>
              <li><a href="#"><i class="fa-brands fa-twitter"></i> Twitter</a></li>
              <li><a href="#"><i class="fa-brands fa-instagram"></i> Instagram</a></li>
              <li><a href="#"><i class="fa-brands fa-tiktok"></i> TikTok</a></li>
              <li><a href="#"><i class="fa-brands fa-telegram"></i> Telegram</a></li>
            </ul>
          </div>
        </div>
        <div class="col2 d-md-flex align-items-center justify-content-between">
		
          <div class="logo_sec d-md-flex align-items-center">
		  <div class="d-md-inline d-none">
              <a href="#"><img src="/images/logo.svg" alt="Priceop" style="max-width: 50px;"></a>
            </div>
            <a href="#">Home</a>
            <a href="#">Comparison Product</a>
            <a href="#">Shows</a>
            <a href="#">Reviews</a>
            <a href="#">Blog</a>
          </div>
          <div class="logo_sec d-flex align-items-center right_links">
            <a href="#" title="Sell Tickets">Return Policy</a>
            <a href="#" title="Support">Support</a>
          </div>
        </div>
        <div class="col2 d-md-flex align-items-center justify-content-between copyrow">
          <div class="logo_sec d-flex align-items-center">
            <span>© 2024 Priceop. All rights reserved.</span>
          </div>
          <div class="logo_sec d-flex align-items-center right_links">
            <a href="#" title="Terms of Service">Terms of Service</a>
            <a href="#" title="Privacy Policy">Privacy Policy</a>
          </div>
        </div>
      </div>
    </footer>
	
<script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
	
   	 <script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=663119804efa460019f10385&product=inline-share-buttons&source=platform" async="async"></script>
	

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/jquery.slick/1.4.1/slick.min.js"></script>
	
	
	<script>
		$('.slider-for').slick({
		  slidesToShow: 1,
		  slidesToScroll: 1,
		  arrows: false,
		  fade: true,
		  asNavFor: '.slider-nav'
		});
		$('.slider-nav').slick({
		  slidesToShow: 5,
		  slidesToScroll: 1,
		  asNavFor: '.slider-for',
		  dots: false,
		  centerMode: false,
		  focusOnSelect: true
		});
	</script>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.2.2/echarts.min.js"></script>

  <script th:inline="javascript">
	  // Inject JSON data from the server-side into a JavaScript variable
	  var priceHistory = /*[[${priceHistorys}]]*/ [];

	  // Assuming `priceHistory` is directly assigned from Thymeleaf
	  console.log("priceHistory:", priceHistory);
	  // Check if priceHistory is empty


	  const priceHistoryData = JSON.parse(priceHistory);
	  console.log("Parsed Data:", priceHistoryData);

	  if (priceHistoryData.length===0) {
		  // Display a message if there's no price history
		  document.getElementById("line").innerHTML = "<p>History not maintained</p>";
	  } else {

		  // Extract dates and prices from the data
		  const dates = priceHistoryData.map(item => new Date(item.dateChanged).toLocaleDateString('en-GB'));
		  const prices = priceHistoryData.map(item => parseFloat(item.price));

		  // Initialize the chart
		  const chart = echarts.init(document.getElementById("line"));

		  // Configure the chart options
		  const option = {
			  xAxis: {
				  type: 'category',
				  data: dates  // Dates for the x-axis
			  },
			  yAxis: {
				  type: 'value'
			  },
			  tooltip: {trigger: 'axis'},
			  series: [
				  {
					  data: prices,  // Prices for the y-axis
					  type: 'line'
				  }
			  ]
		  };

		  // Set the chart options
		  chart.setOption(option);
	  }
  </script>






  </body>
</html>
